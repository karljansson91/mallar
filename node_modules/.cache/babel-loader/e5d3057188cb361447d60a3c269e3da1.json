{"ast":null,"code":"// Generated by CoffeeScript 1.12.1\n(function () {\n  var JPEG,\n      fs,\n      indexOf = [].indexOf || function (item) {\n    for (var i = 0, l = this.length; i < l; i++) {\n      if (i in this && this[i] === item) return i;\n    }\n\n    return -1;\n  };\n\n  fs = require('fs');\n\n  JPEG = function () {\n    var MARKERS;\n    MARKERS = [0xFFC0, 0xFFC1, 0xFFC2, 0xFFC3, 0xFFC5, 0xFFC6, 0xFFC7, 0xFFC8, 0xFFC9, 0xFFCA, 0xFFCB, 0xFFCC, 0xFFCD, 0xFFCE, 0xFFCF];\n\n    function JPEG(data, label) {\n      var channels, marker, pos;\n      this.data = data;\n      this.label = label;\n\n      if (this.data.readUInt16BE(0) !== 0xFFD8) {\n        throw \"SOI not found in JPEG\";\n      }\n\n      pos = 2;\n\n      while (pos < this.data.length) {\n        marker = this.data.readUInt16BE(pos);\n        pos += 2;\n\n        if (indexOf.call(MARKERS, marker) >= 0) {\n          break;\n        }\n\n        pos += this.data.readUInt16BE(pos);\n      }\n\n      if (indexOf.call(MARKERS, marker) < 0) {\n        throw \"Invalid JPEG.\";\n      }\n\n      pos += 2;\n      this.bits = this.data[pos++];\n      this.height = this.data.readUInt16BE(pos);\n      pos += 2;\n      this.width = this.data.readUInt16BE(pos);\n      pos += 2;\n      channels = this.data[pos++];\n\n      this.colorSpace = function () {\n        switch (channels) {\n          case 1:\n            return 'DeviceGray';\n\n          case 3:\n            return 'DeviceRGB';\n\n          case 4:\n            return 'DeviceCMYK';\n        }\n      }();\n\n      this.obj = null;\n    }\n\n    JPEG.prototype.embed = function (document) {\n      if (this.obj) {\n        return;\n      }\n\n      this.obj = document.ref({\n        Type: 'XObject',\n        Subtype: 'Image',\n        BitsPerComponent: this.bits,\n        Width: this.width,\n        Height: this.height,\n        ColorSpace: this.colorSpace,\n        Filter: 'DCTDecode'\n      });\n\n      if (this.colorSpace === 'DeviceCMYK') {\n        this.obj.data['Decode'] = [1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0];\n      }\n\n      this.obj.end(this.data);\n      return this.data = null;\n    };\n\n    return JPEG;\n  }();\n\n  module.exports = JPEG;\n}).call(this);","map":{"version":3,"sources":["/Users/kaja/Code/mallar/node_modules/pdfkit/js/image/jpeg.js"],"names":["JPEG","fs","indexOf","item","i","l","length","require","MARKERS","data","label","channels","marker","pos","readUInt16BE","call","bits","height","width","colorSpace","obj","prototype","embed","document","ref","Type","Subtype","BitsPerComponent","Width","Height","ColorSpace","Filter","end","module","exports"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.12.1\n(function() {\n  var JPEG, fs,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  fs = require('fs');\n\n  JPEG = (function() {\n    var MARKERS;\n\n    MARKERS = [0xFFC0, 0xFFC1, 0xFFC2, 0xFFC3, 0xFFC5, 0xFFC6, 0xFFC7, 0xFFC8, 0xFFC9, 0xFFCA, 0xFFCB, 0xFFCC, 0xFFCD, 0xFFCE, 0xFFCF];\n\n    function JPEG(data, label) {\n      var channels, marker, pos;\n      this.data = data;\n      this.label = label;\n      if (this.data.readUInt16BE(0) !== 0xFFD8) {\n        throw \"SOI not found in JPEG\";\n      }\n      pos = 2;\n      while (pos < this.data.length) {\n        marker = this.data.readUInt16BE(pos);\n        pos += 2;\n        if (indexOf.call(MARKERS, marker) >= 0) {\n          break;\n        }\n        pos += this.data.readUInt16BE(pos);\n      }\n      if (indexOf.call(MARKERS, marker) < 0) {\n        throw \"Invalid JPEG.\";\n      }\n      pos += 2;\n      this.bits = this.data[pos++];\n      this.height = this.data.readUInt16BE(pos);\n      pos += 2;\n      this.width = this.data.readUInt16BE(pos);\n      pos += 2;\n      channels = this.data[pos++];\n      this.colorSpace = (function() {\n        switch (channels) {\n          case 1:\n            return 'DeviceGray';\n          case 3:\n            return 'DeviceRGB';\n          case 4:\n            return 'DeviceCMYK';\n        }\n      })();\n      this.obj = null;\n    }\n\n    JPEG.prototype.embed = function(document) {\n      if (this.obj) {\n        return;\n      }\n      this.obj = document.ref({\n        Type: 'XObject',\n        Subtype: 'Image',\n        BitsPerComponent: this.bits,\n        Width: this.width,\n        Height: this.height,\n        ColorSpace: this.colorSpace,\n        Filter: 'DCTDecode'\n      });\n      if (this.colorSpace === 'DeviceCMYK') {\n        this.obj.data['Decode'] = [1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0];\n      }\n      this.obj.end(this.data);\n      return this.data = null;\n    };\n\n    return JPEG;\n\n  })();\n\n  module.exports = JPEG;\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}