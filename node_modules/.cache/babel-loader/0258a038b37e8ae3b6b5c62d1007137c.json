{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchImage = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _pngJs = require('png-js');\n\nvar _pngJs2 = _interopRequireDefault(_pngJs);\n\nvar _jpeg = require('./jpeg');\n\nvar _jpeg2 = _interopRequireDefault(_jpeg);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar request = require('request');\n\nfunction getImage(body, extension) {\n  switch (extension.toLowerCase()) {\n    case 'jpg':\n    case 'jpeg':\n      return new _jpeg2.default(body);\n\n    case 'png':\n      return new _pngJs2.default(body);\n\n    default:\n      throw new Error('Image type not supported: ' + extension);\n  }\n}\n\nvar fetchImage = exports.fetchImage = function fetchImage(src) {\n  if ((typeof src === 'undefined' ? 'undefined' : _typeof(src)) === 'object') {\n    if (src.data && src.format) {\n      // Local file given\n      return new Promise(function (resolve, reject) {\n        return resolve(getImage(src.data, src.format));\n      });\n    }\n\n    throw new Error('Invalid data given for local file: ' + JSON.stringify(src));\n  }\n\n  return new Promise(function (resolve, reject) {\n    request({\n      url: src,\n      method: 'GET',\n      encoding: null\n    }, function (error, response, body) {\n      if (error) {\n        return reject(error);\n      }\n\n      var isPng = body[0] === 137 && body[1] === 80 && body[2] === 78 && body[3] === 71 && body[4] === 13 && body[5] === 10 && body[6] === 26 && body[7] === 10;\n      var isJpg = body[0] === 255 && body[1] === 216 && body[2] === 255;\n      var extension = '';\n\n      if (isPng) {\n        extension = 'png';\n      } else if (isJpg) {\n        extension = 'jpg';\n      } else reject(new Error('Not valid image extension'));\n\n      var image = getImage(body, extension);\n      return resolve(image);\n    });\n  });\n};","map":{"version":3,"sources":["/Users/kaja/Code/mallar/node_modules/@react-pdf/core/lib/utils/image.js"],"names":["Object","defineProperty","exports","value","fetchImage","undefined","_typeof","Symbol","iterator","obj","constructor","prototype","_pngJs","require","_pngJs2","_interopRequireDefault","_jpeg","_jpeg2","__esModule","default","request","getImage","body","extension","toLowerCase","Error","src","data","format","Promise","resolve","reject","JSON","stringify","url","method","encoding","error","response","isPng","isJpg","image"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchImage = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _pngJs = require('png-js');\n\nvar _pngJs2 = _interopRequireDefault(_pngJs);\n\nvar _jpeg = require('./jpeg');\n\nvar _jpeg2 = _interopRequireDefault(_jpeg);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar request = require('request');\n\nfunction getImage(body, extension) {\n  switch (extension.toLowerCase()) {\n    case 'jpg':\n    case 'jpeg':\n      return new _jpeg2.default(body);\n    case 'png':\n      return new _pngJs2.default(body);\n    default:\n      throw new Error('Image type not supported: ' + extension);\n  }\n}\n\nvar fetchImage = exports.fetchImage = function fetchImage(src) {\n  if ((typeof src === 'undefined' ? 'undefined' : _typeof(src)) === 'object') {\n    if (src.data && src.format) {\n      // Local file given\n      return new Promise(function (resolve, reject) {\n        return resolve(getImage(src.data, src.format));\n      });\n    }\n    throw new Error('Invalid data given for local file: ' + JSON.stringify(src));\n  }\n\n  return new Promise(function (resolve, reject) {\n    request({\n      url: src,\n      method: 'GET',\n      encoding: null\n    }, function (error, response, body) {\n      if (error) {\n        return reject(error);\n      }\n\n      var isPng = body[0] === 137 && body[1] === 80 && body[2] === 78 && body[3] === 71 && body[4] === 13 && body[5] === 10 && body[6] === 26 && body[7] === 10;\n\n      var isJpg = body[0] === 255 && body[1] === 216 && body[2] === 255;\n\n      var extension = '';\n      if (isPng) {\n        extension = 'png';\n      } else if (isJpg) {\n        extension = 'jpg';\n      } else reject(new Error('Not valid image extension'));\n\n      var image = getImage(body, extension);\n      return resolve(image);\n    });\n  });\n};"]},"metadata":{},"sourceType":"script"}